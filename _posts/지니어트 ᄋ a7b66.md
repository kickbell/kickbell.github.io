# 지니어트 인수인계

[지니어트 기술 스택](https://www.notion.so/3a5112691bbd404897b91f06c932cf0d)

[지니어트 프로젝트 구조](https://www.notion.so/f34e190eddda4e869a36b24f60a42536)

[지니어트 프로젝트 설명 ](https://www.notion.so/7efd22a437504412a508d28499b4129d)

## 배포 관련

지니어트 개발자에 초대 받으셨다면

프로젝트의 루트 디렉토리 → fastlane → Appfile

`apple_id` 를 본인의 계정으로 변경합니다.

[.env](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66.env)

[.env 참고사항 ](https://www.notion.so/env-634048e52f954278b95f21e979d84bc3)

이후 .env의 내용을 입력하여 fastlane 디렉토리에 넣어주면 됩니다.

`FIREBASE_TOKEN`을 입력하시면 됩니다.

→ 토큰값은 터미널에서 `firebase login:ci` 를 입력하셔서 로그인을 하시면 받을 수 있습니다. 

→ 컴퓨터를 바꾸시거나 하시면 .env 파일이 필요하니 잘 옮겨두셔야 합니다. 

`fastlane`에 `AppStore Connect API Key`가 지정되어 있으므로, 배포시 별다른 문제는 없으리라 예상됩니다.

## 배포 방법

( 현재 앱스토어 커넥트 버전 > 현재 프로젝트의 버전이어야 합니다. 따라서 현재 버전이 1.4.4라면 앱스토어 커넥트에서 심사에 넣을 1.4.5 버전을 생성해줍니다. )

프로젝트의 루트 디렉토리에서 터미널을 열고 아래 명령어를 입력합니다. 

빌드번호는 따로 지정할 것 없이 자동으로 올라갑니다. 다만 심사시에는 올라가지 않으니 따로 지정해주셔야 합니다. 

testflight/firebase 의 빌드번호를 동일하게 유지하고 있으므로 가급적 배포시 둘 다 배포바랍니다. 

1. testflight 

`fastlane test_flight` (AppStore `RC`(릴리즈 후보) 태그가 달립니다.)

1. firebase

`fastlane firebase`  (Inhouse `beta` 태그가 달립니다.)

## API 문서

`POST MAN`  과 `Google Spreadsheets` 둘 다 사용하고 있습니다.

상대적으로 실시간 동기화가 빠른 것은 구글이니 구글로 보시고, 포스트맨으로 직접 테스트 해보시면 됩니다. 

[Geniet.json](https://www.notion.so/API-Postman-864ddd12471e44549bbba5943309b440) : `지니어트 어플 개발 정리`  → `DB/기능설명` → `API서버 Postman`  

[API 문서 링크](https://docs.google.com/spreadsheets/d/15JVcnzGCXcIrXUYK9wy8o0OF5tJzvtaRJiP4UDINJXk/edit#gid=944362298) : `지니어트 어플 개발 정리`  → `DB/기능설명` → `문서 URL 모음`  

[Postman 유의사항 ](https://www.notion.so/Postman-a77960cfd1e845e0a73f32dd681050db)

## 계정 정보

[지니어트 사용 계정 정리](https://www.notion.so/f2612c9808b7438f808a1272159a376a) : `지니어트 어플 개발 정리`  → `정책 및 사용계정` → `지니어트 사용 계정 정리` 

## 개발 인증서

지니어트 인증서는 Apple Developer Center에서 재발급 받으시면 됩니다.

(지금 사용하는 인증서를 그대로 사용하시려면 하단에 첨부해놓겠습니다. 비밀번호 1234, 기존 인증서 유효기간 2022/11/18, 프로비저닝 파일은 기기 새로 등록하셔야 하니까 따로 첨부해놓지 않겠습니다.)

~~지니어트의 인증서는 `fastlane match`를 통해 관리하고 있습니다.~~

~~이는 나중에.. 다른 개발자가 추가되었을 때 인증서의 관리를 편히 하려고 계획했습니다.~~

~~현재 혼자 개발이므로, `fastlane match` 를 사용하셔도 좋고, 사용하지 않으셔도 관계 없습니다.~~

`~~fastlane match`를 사용했을 때 집에서 급하게 수정해야 하는 경우가 있었는데,~~ 

~~자유롭게 인증서를 받아올 수 있어 편리 했던 기억이 남습니다.~~

`~~fastlane match` 를 사용하고자 하신다면 Matchfile을 참조하고, `fastlane match` 의 문서를 확인하세요~~

[지니어트 Distribution.p12](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%EC%A7%80%EB%8B%88%EC%96%B4%ED%8A%B8_Distribution.p12)

[지니어트 Development.p12](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%EC%A7%80%EB%8B%88%EC%96%B4%ED%8A%B8_Development.p12)

## CMS(Content Management System)

테스트 CMS : [http://cms-test.geniet.io/](http://cms-test.geniet.io/)

테스트 계정(공용) :  [test@cashwalk.io](mailto:test@cashwalk.io) / test

상용 CMS : [http://cms.geniet.io/](http://cms.geniet.io/)

상용 계정 : `백엔드 담당자`에게 계정 생성 요청

## 업무보고

매일 퇴근 시 지니어트 슬랙 `app-daily_task` 채널에 진행한 업무 작성하고 퇴근

## 주간회의

매주 월요일 오전 11시, 7층 대회의실 

## 심사요청 / 배포

심사 요청 시 제외해야 하는 부분들이 있습니다. 

`메인 화면의 커뮤니티 탭 / 사이드 메뉴 다이어트 커뮤니티 메뉴` 

사유는 해당 화면이 웹뷰로 구현된 `네이버 카페 씨씨앙` 인데 네이버 로그인이 필요하기 때문에 심사시 심사 거절사유가 되기 때문입니다. 따로 코드를 바꿔줘야 하는 것은 아니고 `firebase remote config` 를 사용하고 있습니다. 

→ 파이어베이스 지니어트 권한을 받으시고 `[Remote Config](https://console.firebase.google.com/u/2/project/geniet-50fa8/config)` 탭에 들어가시면 앱 버전이 지정되어 있어요. 예를 들어, 다음 나갈 버전이 1.5.0 이라면 Remote Config의 버전도 1.5.0 으로 지정해서 심사를 요청합니다. 그러면 제외해야 하는 부분들이 제외된 상태로 심사가 요청됩니다. 심사가 완료되면 다시 Remote Config 의 버전을 1.5.1과 같은식으로 올려주고, 심사가 통과되었으니 앱을 수동으로 배포하면 됩니다. 

( 버전을 바꿔주지 않으면 해당 메뉴가 앱에서 보이지 않을 수 있으므로 순서에 유의해서 잘 처리해주셔야 해요. ) 

[Remote Config 주의사항 ](https://www.notion.so/Remote-Config-b33773bac5ec40b6b15f3e384e589d47)

## 기획서

[IOS_지니어트_200813_메인최초_v0.0.3.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/IOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_200813_%E1%84%86%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%8E%E1%85%AC%E1%84%8E%E1%85%A9_v0.0.3.pdf)

[IOS_지니어트_201228_하단탭,탈퇴기능_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/IOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_201228_%E1%84%92%E1%85%A1%E1%84%83%E1%85%A1%E1%86%AB%E1%84%90%E1%85%A2%E1%86%B8%E1%84%90%E1%85%A1%E1%86%AF%E1%84%90%E1%85%AC%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC_v0.0.1.pdf)

[iOS_지니어트_201028_좌측메뉴_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/iOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_201028_%E1%84%8C%E1%85%AA%E1%84%8E%E1%85%B3%E1%86%A8%E1%84%86%E1%85%A6%E1%84%82%E1%85%B2_v0.0.1.pdf)

[iOS_지니어트_210311_인바디_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/iOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_210311_%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%87%E1%85%A1%E1%84%83%E1%85%B5_v0.0.1.pdf)

[iOS_지니어트_210412_이벤트,공지_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/iOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_210412_%E1%84%8B%E1%85%B5%E1%84%87%E1%85%A6%E1%86%AB%E1%84%90%E1%85%B3%E1%84%80%E1%85%A9%E1%86%BC%E1%84%8C%E1%85%B5_v0.0.1.pdf)

[iOS_지니어트_210715_캐시_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/iOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_210715_%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5_v0.0.1.pdf)

[iOS_지니어트_211014_메뉴편집,로컬푸시발송_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/iOS_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_211014_%E1%84%86%E1%85%A6%E1%84%82%E1%85%B2%E1%84%91%E1%85%A7%E1%86%AB%E1%84%8C%E1%85%B5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%8F%E1%85%A5%E1%86%AF%E1%84%91%E1%85%AE%E1%84%89%E1%85%B5%E1%84%87%E1%85%A1%E1%86%AF%E1%84%89%E1%85%A9%E1%86%BC_v0.0.1.pdf)

[WEB_지니어트_211015_체험단푸시수정_v0.0.1.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/WEB_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_211015_%E1%84%8E%E1%85%A6%E1%84%92%E1%85%A5%E1%86%B7%E1%84%83%E1%85%A1%E1%86%AB%E1%84%91%E1%85%AE%E1%84%89%E1%85%B5%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC_v0.0.1.pdf)

[iOS_지니어트_생리기록 기획_220112.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%EC%A7%80%EB%8B%88%EC%96%B4%ED%8A%B8_%EC%83%9D%EB%A6%AC%EA%B8%B0%EB%A1%9D_%EA%B8%B0%ED%9A%8D_220112.pdf)

## 플로우 차트

[iOS_지니어트_생리기록 플로우차트.png](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%E1%84%89%E1%85%A2%E1%86%BC%E1%84%85%E1%85%B5%E1%84%8C%E1%85%AE%E1%84%80%E1%85%B5_%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8B%E1%85%AE%E1%84%8E%E1%85%A1%E1%84%90%E1%85%B3.png)

[iOS_캐시워크 지니어트 연동 플로우 차트.png](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC_%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8B%E1%85%AE_%E1%84%8E%E1%85%A1%E1%84%90%E1%85%B3.png)

## Git 브랜치 전략

![스크린샷 2021-11-24 오후 1.43.16.png](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2021-11-24_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_1.43.16.png)

(혼자하지만, 곧 지니어트가 대폭발성장해서 여러 명이 함께 작업할 수도 있으므로) 브랜치 전략으로 `Git-flow` 를 사용하고 있습니다. 

새로운 버전을 배포할 때마다`master` 브랜치에 `tag` 를 해주고 있고, `fastlane` 으로 `firebase` 배포를 하면 `beta`, `test flight` 를 배포하면 `RC(Release Candidate)` 태그가 자동으로 태깅되도록 적용되어 있습니다. 혹시 Git-flow에 대한 설명이 필요하시다면, [한글](https://backlog.com/git-tutorial/kr/stepup/stepup1_5.html) or [원문](https://nvie.com/posts/a-successful-git-branching-model/)을 참고해주세요. 

→ 아 그리고, 현재 넛지헬스케어는 형상관리툴 유틸리티로 유료 툴인 `GitKraken`을 사용하고 있는데요. 요녀석이 아주 똘똘하게도 tool에서 `Git-flow` 작업을 지원해주고 있습니다. 간단한 클릭 몇 번 만으로 브랜치 병합, 작업하던 브랜치 삭제, master 태깅까지 지원해주니 아주 편-안합니다. 이 기능은 꼭 사용하시는 걸 추천합니다. 😂

## 컴파일 최적화

[https://github.com/RobertGummesson/BuildTimeAnalyzer-for-Xcode](https://github.com/RobertGummesson/BuildTimeAnalyzer-for-Xcode)

## Convention Tool & Swift Style

지니어트에서는 컨벤션 툴로 `SwiftLint`가 적용되어 있습니다. 스타일 가이드는 에어비엔비와 스타일쉐어를 같이 쓰고 있어요. 자세한 규칙은 프로젝트 숨김파일 `.swiftformat`, `.swiftlint.yml` 을 확인하시면 됩니다.

를 사용하는 방식은 pod, script 등이 있지만 지니어트에서는 커밋 전에 한번씩 체크해주는 방법으로 업무를 진행하고 있습니다. 

추후수정...

  

## 푸시테스트

푸시테스트는 CMS에서 가능합니다.  테스트 발송을 위해서는 다른 항목은 건드리지 않아도 되고, 아래 첨부된 사진 처럼 `푸시 발송설정` 메뉴를 열고 제일 하단 `테스트 발송` 항목에서 test 버전으로 가입된 `닉네임명`을 입력하고 우측 테스트 발송 버튼을 누르면 푸시가 발송됩니다. 

![Untitled](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/Untitled.png)

## G포인트 적립금 한도

[G포인트 적립금 한도](https://www.notion.so/G-988813b63d064ba0b35d4dabc09938d7) :  `지니어트 어플 개발 정리`  → `정책 및 사용계정` → `G포인트 적립금 한도` 

## G포인트 관련 로직

`2021.12.22` 기준 G포인트를 얻을 수 있는 방법은 총 7가지 입니다. 그 중에 친구초대는 따로 코인 애니메이션 같은 효과는 없이 추천코드가 등록됐다면 자동으로 500 포인트가 적립되지요. 

| 적립항목 | 1일 획득가능한 G포인트 | 포인트 노출기준 |
| --- | --- | --- |
| 걸음수 | 100 | 1000보당 10포인트  |
| 체중입력 | 30 | 1회 등록 시 30포인트 |
| 인바디 | 30 | 1회 등록 시 30포인트 |
| 눈바디 | 30 | 1회 등록 시 30포인트 |
| 물섭취 | 20 | 1회 등록 시 20포인트 |
| 식단 | 90 | 1끼 등록 시 30포인트
최대 3끼까지 포인트 제공 |
| 친구초대 | 500 |  |

포인트를 획득하거나 메인화면에 진입하면 UI를 그려주기 위한 데이터가 응답하게 되는데요.  우리가 지금 봐야할 부분은 **`typePoint`** 키 값을 가진 각 항목별 데이터 입니다.  **`typePoint`** 는 각 타입별로 또 다른 키 값을 가지고 있는데요. 

```swift
"walkPoint" : { //타입 
        "isPoint" : 1, //적립가능여부 
        "oneDayLimitCount" : 100, //1일 획득가능한 G포인트
        "provideByOne" : 10, //1회 조건 충족시 제공하는 포인트
        "canbePoint" : 90, //남은 적립 가능 포인트 
        "earnType" : 1 //데이터 유효성 상태 (코인획득완료, 미션완료/코인미획득, 미션안함)
}
```

다른 타입들은 `oneDayLimitCount` 과 `provideByOne`의 값이 같기 때문에 딱히 계산 로직이 필요없지만, 걸음수와 식단은 그렇지 않으므로 로컬에서 계산해서 값을 리턴하고 있습니다. 

[걸음수에 따른 G포인트 계산로직 ](https://www.notion.so/G-8976833b169c490aa8ef1f8e4ca50f1b)

[식단입력에 따른 G포인트 계산로직 ](https://www.notion.so/G-efa22a94422f4bc5af9a714a089ac709)

[현재 획득 가능한 G포인트 총합 계산 로직 ](https://www.notion.so/G-99406e1431b9498e98fc914c0e75beef)

[지니어트 `/main`, `/point` 관련 응답값 예시](https://www.notion.so/main-point-11066b9c2b09430799b7dfc9bfe10b37)

## 걸음수 계산(다중계정 로그인, 어뷰징 예외처리)

걸음수는 `CoreMotion` 프레임워크 내의 `CMPedometer` 를 사용하여 데이터를 가져오고 있습니다. `HealthKit` 을 사용하지 않는 이유는 걸음수 데이터를 가져오는 시간이 상대적으로 짧기 때문으로 알고있어요.

또, 현재는 백그라운드 관련해서 처리는 따로 해주지 않고 있어요. `CMPedometer` 같은 경우 앱이 백그라운드 상태에서는 아무런 콜백이 오지 않고 누적만 되고 있다가, 다시 앱이 실행되면 백그라운드에서 카운트 된 걸음수를 합산해서 돌려주기 때문에 따로 포인트를 준다던지 하는 부분에서 문제는 없었습니다. 

다만, 한 명의 유저가 여러 개의 아이디를 사용할 수 있기도 하고, 어뷰징에 대한 예외처리도 해야 하기 때문에 계산 로직이 필요합니다. 걸음수 관련 로직은 아래와 같이 동작하고 있습니다. 로직은 초간단하게 구현했음에도 처음보면 다소 복잡할 수 있습니다.  

> `CMPedometer` 는 계정이 바뀌어도 디바이스에서 가져오는 데이터이기 때문에 누적된다.
> 

> `CMPedometer` 는 `Date`가 변경되면 초기화 된다.
> 

> 어떤 계정이 로그아웃 할 때의 걸음수가 300이었다면, 재로그인을 해도 `Date`가 변경되지 않는 한 `CMPedometer` 와 관계없이 걸음수는 300이다.
> 

> `CMPedometer` 는 기본적으로 앱이 백그라운드 상태에서 100걸음을 걷더라도 아무런 이벤트를 주지 않다가 앱이 다시 활성화상태가 되면 기존 걸음수에 백그라운드 상태에서 걸은 100 걸음을 합산해서 이벤트를 보내준다.
> 

[걸음 수 관련 계산 로직 설명](https://www.notion.so/7117d5af925b4bbabfc96080742d5a0e)

## 캐시워크 지니어트 연동

2022.01.17기준 캐시워크 앱 내 지니어트를 연동하는 작업을 진행합니다. 대부분은 웹뷰로 구현되지만, 네이티브 코드도 제법 들어갑니다. 그래서 캐시워크도 일부 수정되어야 하고, 지니어트 내부코드도 수정되어야 합니다. 기획서 및 플로우차트, 클라이언트 웹뷰 설정 문서를 따로 첨부합니다. 

[AOS_캐시워크_220126_캐시워크지니어트유입_v0.0.7.pdf](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/AOS_%EC%BA%90%EC%8B%9C%EC%9B%8C%ED%81%AC_220126_%EC%BA%90%EC%8B%9C%EC%9B%8C%ED%81%AC%EC%A7%80%EB%8B%88%EC%96%B4%ED%8A%B8%EC%9C%A0%EC%9E%85_v0.0.7.pdf)

[Geniet-API-V2.postman20220215.json](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/Geniet-API-V2.postman20220215.json)

[iOS_캐시워크 지니어트 연동 플로우 차트.png](%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3%20%E1%84%8B%20a7b66/%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3_%E1%84%8C%E1%85%B5%E1%84%82%E1%85%B5%E1%84%8B%E1%85%A5%E1%84%90%E1%85%B3_%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC_%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8B%E1%85%AE_%E1%84%8E%E1%85%A1%E1%84%90%E1%85%B3%201.png)

[캐시워크 지니어트 연동 프론트엔드 웹뷰 설정 문서(인자, 브릿지)](https://www.notion.so/d6c5b5c87d1d4db1a26bf913d1007121)

[캐시워크 지니어트 연동 API 문서](https://www.notion.so/v2-api-29c9df81ddb84b17ad92b4d0bfb86dbd) 

[캐시워크 지니어트 연동 업무 스케쥴링](https://www.notion.so/562c35358d9449f4814097731fbe87e3) 

[[참고용] 지니어트 체험단 연결 웹뷰 설정](https://www.notion.so/URL-ETC-25f87c127e284050acc8c17e03e6d280)

[[참고용] 어디서했니 웹뷰 설정](https://www.notion.so/cf74ced046064b1d8194144925f34da9)

1. 캐시워크에서의 작업 
    - 캐시워크 메인에 지니어트 메뉴추가, cb060d4cd1953e2ad4ec5ad6061b695e32a94cad
    - 캐시워크 메인 탑뷰수정 BMI->Geniet, 10dfe9770b6ea19eef03d9a8c6abdaec33dc0d2d
    
    - 캐시워크는 웹뷰 관리를  `CashwalkWebViewController` , `WebType` 에서 통합적으로 작업하고 있습니다. 파라미터나 바디관련 설정은 enum으로 정의된 `WebType` 에서 `param`, `makebody`, `receiveMessage` 를 통해 추가해주시면 됩니다.
    - 딥링크는 `DeepLinkManager` 라는 클래스를 통해 따로 관리해주고 있어요.
2. 지니어트에서의 작업 
    - 지니어트에서는 캐시워크에서 지니어트에 연동되었을 때, 임시로 생성된 데이터를 지니어트로 새로 가입된 계정 정보에 덮어쓰기 해주어야 해요.
    - API 연동 여부 체크하고.. 기존 토큰값..?..  추가로 작업하면서 적기

다이나믹 링크가 오는곳

맨위 스타벅스 쿠폰받기. 

웹뷰 브릿지가 오는곳. 

맨아래도 바뀐다고함. 지니어트로 스벅구매하기 

유의사항 

AppGlobalFunc.pushToWebViewController(title: "", url: url, hiddenbar: true, webType: .geniet_main)

에서 webtype을 넣지않으면 CashwalkWebViewController의 self.setUserController()가 실행되지 않아 브릿지가 연결되지않아서 destoryView가 불리지 않음. 

## ISSUE HISTORY

[iOS 1.4.4 `Release` - 포인트 획득시 사운드 및 진동 ](https://www.notion.so/iOS-1-4-4-Release-f64a762719d54e63969a99669056d7fe)

[iOS 1.4.4 `Release` - ~~포인트 획득시 앱 아이콘 뱃지 설정~~](https://www.notion.so/iOS-1-4-4-Release-a326528332224d41bbddf56355fe3dec)

[iOS 1.4.4 `Release` - 서버에서 포인트 한도~~금액 받아오도록 변경~~](https://www.notion.so/iOS-1-4-4-Release-6a7c623075d343ed887a54a7e7b3d875)

[iOS 1.4.5 `Release` - 포인트 획득시 애니메이션 끊김 현상 개선](https://www.notion.so/iOS-1-4-5-Release-7677d58b6c0746bdace291dd85fc1396)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-6bda4dfb18504dd399e5d574c33fd02c)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-9131f18b812e40caa165f2b4c2da38a1)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-0c53f86882664f6396489dc4d6dd3599)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-9d45af6c48ba4d26902668ea8a45023c)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-9610099918cd405ab21495d280bb5edb)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-632773a4c25d41ffb045ee5ba60d89d1)

[iOS 1.4.5 `Release` - 코인 애니메이션 끊김 현상 개선 2](https://www.notion.so/iOS-1-4-5-Release-2-81b0bf5320214668a3cbcc07913f55fe)